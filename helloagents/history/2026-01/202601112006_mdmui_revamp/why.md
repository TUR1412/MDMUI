# 变更提案: MDMUI 全链路重构与功能增强

## 需求背景
现有项目具备基础可运行性，但系统参数、备份与安全策略不足，UI 风格分散，功能页存在占位空洞。需要在保留分层架构的前提下进行深度重构与功能扩展。

## 产品分析

### 目标用户与场景
- **用户群体:** 工厂管理员、生产/设备管理人员、IT 运维
- **使用场景:** 登录与权限校验、基础资料维护、系统配置、数据备份
- **核心痛点:** 安全策略缺失、参数难统一、备份不落地、UI 一致性不足

### 价值主张与成功指标
- **价值主张:** 提供“可配置 + 可审计 + 现代化”的管理端体验
- **成功指标:** 登录安全可控、参数集中化、备份可执行、关键页可用、UI 统一

### 人文关怀
强化账户锁定提示、备份失败提示与降级路径，避免误操作造成业务中断。

## 变更内容
1. 系统参数中心（可配置安全/备份/主题）
2. 登录安全策略（失败计数、锁定、密码策略）
3. 数据备份中心（备份执行 + 保留策略）
4. 命令面板智能排序（最近/常用优先）
5. 未来感 UI 主题系统（全局统一样式）
6. 操作审计增强（关键动作记录）

## 影响范围
- **模块:** Forms, BLL, DAL, Utility, Model
- **文件:** 登录/主界面/命令面板/参数与备份页、数据库引导器、工具层
- **API:** 内部服务接口拓展（无对外 API）
- **数据:** 新增 SystemParameters / UserSecurity 表

## 核心场景

### 需求: 登录安全与锁定
**模块:** BLL/Forms
登录失败达到阈值后锁定账号，并提示解锁时间。

#### 场景: 连续失败
- 失败计数累加
- 超阈值触发锁定

### 需求: 系统参数中心
**模块:** Forms/BLL/DAL
集中查看与修改系统参数。

#### 场景: 参数编辑
- 修改参数值
- 保存并刷新更新时间

### 需求: 数据备份中心
**模块:** Forms/BLL
执行本地数据库备份并保留最近 N 天。

#### 场景: 一键备份
- 选择备份目录
- 完成备份并输出结果

### 需求: 命令面板智能
**模块:** Forms/Utility
根据最近使用与频次提升可达性。

#### 场景: 快速打开功能页
- 最近使用排在前列
- 支持分词搜索

### 需求: 主题统一
**模块:** Utility/Forms
全局应用未来感主题与交互细节。

#### 场景: 主界面/子窗体
- 统一字体、颜色与控件风格
- 低成本覆盖所有窗体

## 风险评估
- **风险:** 登录锁定导致误拦截
  - **缓解:** 参数可配置 + 清晰提示
- **风险:** 备份权限不足
  - **缓解:** 失败提示并保留原流程
- **风险:** UI 改动影响可读性
  - **缓解:** 统一主题 + 可降级样式
